<html>
  <head>
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
          crossorigin="anonymous">
    <title> Teo Toplak | personal website</title>
  </head>
  <body>
  <div class="container">
    <div class="row d-flex align-items-center" style="height: 100vh">
      <div class="col">
        <h1 class="display-2">Teo Toplak</h1>
        <h4 class="text-muted">
          <a href="https://www.linkedin.com/in/teo-toplak-89151594">LinkedIn</a> |
          <a href="https://medium.com/@teotoplak95">Medium</a> |
          <a href="https://github.com/teotoplak">Github</a>
        </h4>
      </div>
      <div class="col d-flex flex-column align-items-center justify-content-end">
        <h3 class="ml-auto">Cloud Computing</h3>
        <h3 class="ml-auto">Blockchain</h3>
        <h3 class="ml-auto">Productivity</h3>
        <h3 class="ml-auto">Mindfulness</h3>
        <h3 class="ml-auto">Travel</h3>
        <h3 class="ml-auto text-muted">enthusiast</h3>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col">
        <h1 class="text-center">
          <span>You are what you </span>
          <span style="text-decoration: line-through;">eat</span> read
        </h1>
      </div>
    </div>
    <div class="d-flex flex-wrap" id="pics">

    </div>
  </div>
  </body>
<script>

  let goodreadsEndpoint = "https://www.goodreads.com/review/list/26975906.xml?key=RvbIOcUGmindrbTmiPbdg&v=2&shelf=read";
  // cors workaround
  goodreadsEndpoint = "https://cors-anywhere.herokuapp.com/" + goodreadsEndpoint;

  function httpGetAsync(theUrl, callback)
  {
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.onreadystatechange = function () {
      if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
        callback(xmlHttp.responseText);
    };
    xmlHttp.open("GET", theUrl, true); // true for asynchronous
    xmlHttp.send(null);
  }

  function callbackFunction(content) {
    parser = new DOMParser();
    xmlDoc = parser.parseFromString(content,"text/xml");
    const imageUrls = xmlDoc.getElementsByTagName("image_url");
    for (i = 0; i < imageUrls.length; i++) {
      imgSource = imageUrls[i].childNodes[0].nodeValue;
      imgSource = imgSource.replace("(\\.+_+[A-Za-z0-9]+_+)", "");
      console.log(imgSource);
      document.getElementById("pics").innerHTML =  document.getElementById("pics").innerHTML +
              `<div><img src='${imgSource}' width="125px" height="200px"</div>`
    }

  }

  httpGetAsync(goodreadsEndpoint, callbackFunction)
</script>
</html>
